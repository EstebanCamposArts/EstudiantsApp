<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Editor EstudiantsApp</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 min-h-screen text-white flex flex-col items-center p-6">

  <h1 class="text-3xl font-bold mb-6">Editor de Contenido ‚Äì EstudiantsApp</h1>

  <div class="bg-gray-900 rounded-2xl shadow-lg p-6 w-full max-w-3xl space-y-6">
    <div>
      <label class="block text-sm font-semibold mb-1">T√≠tulo principal</label>
      <input id="titulo" type="text" class="w-full p-3 rounded bg-gray-800 border border-gray-700" placeholder="COMPARSA ESTUDIANTS ONIL">
    </div>

    <div>
      <label class="block text-sm font-semibold mb-1">Subt√≠tulo</label>
      <input id="subtitulo" type="text" class="w-full p-3 rounded bg-gray-800 border border-gray-700" placeholder="APP WEB OFICIAL">
    </div>

    <div>
      <label class="block text-sm font-semibold mb-2">Secciones</label>
      <div id="lista-secciones" class="space-y-2"></div>
      <button id="agregar" class="mt-2 px-3 py-2 bg-green-600 rounded-lg hover:bg-green-700 transition">+ A√±adir secci√≥n</button>
    </div>

    <div>
      <label class="block text-sm font-semibold mb-1">Texto del pie de p√°gina</label>
      <input id="copyright" type="text" class="w-full p-3 rounded bg-gray-800 border border-gray-700" placeholder="¬© 2025 Comparsa Estudiants Onil">
    </div>

    <div class="flex justify-end gap-4 pt-4">
      <button id="cargar" class="px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition">üìÇ Cargar data.json</button>
      <button id="descargar" class="px-4 py-2 bg-emerald-600 rounded-lg hover:bg-emerald-700 transition">üíæ Descargar JSON</button>
    </div>
  </div>

  <footer class="mt-8 text-sm text-gray-400 opacity-70">Hecho con ‚ù§Ô∏è para Comparsa Estudiants Onil</footer>

  <script>
    const lista = document.getElementById("lista-secciones");

    function crearInputSeccion(valor = "") {
      const div = document.createElement("div");
      div.className = "flex gap-2";
      div.innerHTML = `
        <input type="text" value="${valor}" class="flex-grow p-2 rounded bg-gray-800 border border-gray-700" placeholder="Nombre de la secci√≥n">
        <button class="bg-red-600 px-3 rounded-lg hover:bg-red-700 transition">üóëÔ∏è</button>
      `;
      div.querySelector("button").onclick = () => div.remove();
      lista.appendChild(div);
    }

    document.getElementById("agregar").onclick = () => crearInputSeccion();

    document.getElementById("cargar").onclick = async () => {
      try {
        const res = await fetch("data.json");
        const data = await res.json();

        document.getElementById("titulo").value = data.tituloPrincipal || "";
        document.getElementById("subtitulo").value = data.subtitulo || "";
        document.getElementById("copyright").value = data.copyright || "";

        lista.innerHTML = "";
        (data.secciones || []).forEach(s => crearInputSeccion(s));
        alert("Datos cargados correctamente ‚úÖ");
      } catch (err) {
        alert("No se pudo cargar el archivo data.json");
      }
    };

    document.getElementById("descargar").onclick = () => {
      const data = {
        tituloPrincipal: document.getElementById("titulo").value,
        subtitulo: document.getElementById("subtitulo").value,
        secciones: Array.from(lista.querySelectorAll("input")).map(i => i.value).filter(Boolean),
        copyright: document.getElementById("copyright").value
      };
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "data.json";
      a.click();
      URL.revokeObjectURL(url);
    };
  </script>
</body>
</html>
